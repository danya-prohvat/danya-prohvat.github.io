let input=document.querySelector(".calculation"),history=document.querySelector(".history"),tools=document.querySelector(".calcurator__tools"),flag=!1,arr=["","",""],result=0;function saveResult(){input.innerHTML=arr[0]+arr[2]+arr[1]}function saveHistory(r,a){if(a)switch(a){case"1/x":history.innerHTML="1/ "+r;break;case"x2":history.innerHTML=`${r} * ${r}`;break;case"2_/x":history.innerHTML="âˆš"+r}else history.innerHTML=input.textContent}tools.addEventListener("click",r=>{if(r.target.textContent<10&&(0==flag?arr[0]+=r.target.textContent:arr[1]+=r.target.textContent,saveResult()),"+/-"==r.target.textContent&&(0==flag&&""!=arr[0]?arr[0]>0?(arr[0]-=2*arr[0],saveResult()):(arr[0]=Math.abs(arr[0]),saveResult()):""!=arr[1]&&(arr[1]>0?(arr[1]-=2*arr[1],saveResult()):(arr[1]=Math.abs(arr[1]),saveResult()))),"C"==r.target.textContent&&(arr=["","",""],flag=!1,saveResult()),"back"==r.target.getAttribute("data-value")&&(arr.forEach(r=>{r=String(r)}),""!=arr[0]&&""!=arr[1]&&""!=arr[2]?arr[1]=arr[1].slice(0,-1):""!=arr[0]&&""!=arr[2]?arr[2]=arr[2].slice(0,-1):""!=arr[0]&&(arr[0]=arr[0].slice(0,-1)),""==arr[1]&&""==arr[2]&&(flag=!1),saveResult()),"."==r.target.textContent){if(""!=arr[0]&&""!=arr[1]&&""!=arr[2]){(()=>{for(let r=0;r<arr[1].length;r++){if("."==arr[1][r])return!1;if(r+1==arr[1].length)return!0}})()&&(arr[1]+=".")}else if(""!=arr[0]&&""==arr[2]){(()=>{for(let r=0;r<arr[0].length;r++){if("."==arr[0][r])return!1;if(r+1==arr[0].length)return!0}})()&&(arr[0]+=".")}saveResult()}switch("1/x"==r.target.getAttribute("data-value")&&(0==flag&&""!=arr[0]?(saveHistory(arr[0],"1/x"),arr[0]=Math.round(1/arr[0]*100)/100,saveResult()):""!=arr[1]&&(saveHistory(arr[1],"1/x"),arr[1]=Math.round(1/arr[1]*100)/100,saveResult())),"x2"==r.target.getAttribute("data-value")&&(0==flag&&""!=arr[0]?(saveHistory(arr[0],"x2"),arr[0]=Math.round(arr[0]*arr[0]*100)/100,saveResult()):""!=arr[1]&&(saveHistory(arr[1],"x2"),arr[1]=Math.round(arr[1]*arr[1]*100)/100,saveResult())),"2_/x"==r.target.getAttribute("data-value")&&(0==flag&&""!=arr[0]?(saveHistory(arr[0],"2_/x"),arr[0]=Math.round(100*Math.sqrt(arr[0]))/100,saveResult()):""!=arr[1]&&(saveHistory(arr[1],"2_/x"),arr[1]=Math.round(100*Math.sqrt(arr[1]))/100,saveResult())),r.target.textContent){case"+":case"-":case"*":case"/":0==flag&&""!=arr[0]&&(arr[2]+=r.target.textContent,flag=!0,saveResult());break;case"=":if(""!=arr[0]&&""!=arr[1]&&""!=arr[2]){switch(arr[2]){case"+":saveHistory(),input.innerHTML=result=Math.round(100*(+arr[0]+ +arr[1]))/100;break;case"-":saveHistory(),input.innerHTML=result=Math.round(100*(+arr[0]-+arr[1]))/100;break;case"*":saveHistory(),input.innerHTML=result=Math.round(+arr[0]*+arr[1]*100)/100;break;case"/":saveHistory(),input.innerHTML=result=Math.round(+arr[0]/+arr[1]*100)/100}arr=["","",""],arr[0]=String(result),flag=!1}}console.log(arr)});